!function t(e,n,o){function r(i,c){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){var n=e[i][1][t];return r(n?n:t)},u,u.exports,t,e,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(t,e,n){!function(){e.exports=function(){var t=[100,56.4],e=d3.select("#bar").insert("svg",":first-child").attr("class","chart").attr("width",150).attr("height",20*t.length),n=d3.scale.linear().domain([0,d3.max(t)]).range([0,150]);e.selectAll("rect").data(t).enter().append("rect").attr("width",n).attr("height",20).attr("rx",5).attr("ry",5),e.selectAll("text").data([t[1]]).enter().append("text").attr("x",n).attr("y",10).attr("dx",-3).attr("dy",".35em").attr("text-anchor","end").text(t[1]+"%")}}()},{}],2:[function(t,e,n){!function(){"use strict";function t(t,e,n,o,r){function a(){o.get("./data/lang.json").then(function(e){r.countryLang=e.data,t.countries=Object.keys(e.data).sort()})}function i(t){t in p?(n.path(t),t=t.substring(1),e.page=p[t],r.updateLang(t,p[t],d[t])):o.get("./data"+t+"Data.json").then(function(a){o.get("./data"+t+".json").then(function(o){n.path(t),t=t.substring(1),e.page=o.data,r.updateLang(t,e.page,a.data),p[t]=o.data,d[t]=a.data})})}function c(){i(t.selectedLang)}var l=n.path(),u=["/tw","/en","/esp"];t.languages={"Chinese - Traditional":"/tw",English:"/en",Spanish:"/esp"},t.selectedLang=-1!=u.indexOf(l)?l:"/tw",t.changeLanguage=c,t.country=null,e.page={};var p={},d={};a(),i(t.selectedLang)}e.exports=t}()},{}],3:[function(t,e,n){!function(){"use strict";function e(t){$("section.panel").hide(),$(t).show()}function n(t){$(t).hide()}window.showInfo=e,window.hideInfo=n;{var o=t("./controller/textController");angular.module("myApp",["ngRoute"]).controller("TextController",o)}o.$inject=["$scope","$rootScope","$location","$http","mapService"],t("./service/mapService"),t("./bar")()}()},{"./bar":1,"./controller/textController":2,"./service/mapService":4}],4:[function(t,e,n){!function(){"use strict";function t(t,e){function o(){x=new L.Map("map");var t="https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=ae7238600ca946c382d24553f953f7d1",e='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',n=new L.TileLayer(t,{minZoom:2,maxZoom:16,attribution:e,continuousWorld:!0});x.setView(new L.LatLng(50,15),2),n.addTo(x),x.on("popupopen",function(t){$("div.leaflet-top.leaflet-right").hide(),$(".leaflet-bottom").hide(),$(".penguin").hide(),$("#bar").hide(),$("header").hide(),$(".close-pop-up-button").show()}),x.on("popupclose",function(t){$("div.leaflet-top.leaflet-right").show(),$(".leaflet-bottom").show(),$(".penguin").show(),$("#bar").show(),$("header").show(),$(".close-pop-up-button").hide()})}function r(t,e,n){b.page=e,b.data=n,b.lang=t,D&&(x.removeLayer(A),x.removeControl(S),x.removeControl(T),T=L.control({position:"bottomleft"}),S=L.control(),S.update=y),S.onAdd=m,S.addTo(x),T.onAdd=w,T.addTo(x),i(),a()}function a(){var t="European Union",e="tw"==b.lang?"歐盟":"European Union";"esp"==b.lang&&(e="Unión Europea");var o=s(t,e);j&&x.removeLayer(j),j=L.marker([50.843611,4.382418],{icon:n}),j.addTo(x).bindPopup(o)}function i(){D?(A=c(D),A.addTo(x),$(".leaflet-control-search").remove(),C=new L.Control.Search({layer:A,propertyName:"name",position:"topright"}),x.addControl(C)):(S.update("loading"),t.get("./data/countries.lang.geo.json").then(function(t){D=t.data,A=c(D),A.addTo(x),C=new L.Control.Search({layer:A,propertyName:"name",position:"topright"}),x.addControl(C),S.update()}))}function c(t){var e=t;return L.geoJson(e,{style:l,onEachFeature:p})}function l(t){return{fillColor:u(t),weight:2,opacity:1,color:"#eee",dashArray:"",fillOpacity:.55}}function u(t){return t.properties.name in b.data?"#B50000":"#D5D5D5"}function p(t,e){e.on({mouseover:f,mouseout:g,click:v}),d(t,e)}function d(t,e){var n=t.properties.name,o=b.countryLang[n]&&b.countryLang[n][b.lang]?b.countryLang[n][b.lang]:n;if(n in b.data){var r=s(n,o);e.bindPopup(r,{minWidth:500})}else e.bindPopup("<h2>"+o+"</h2><p>"+b.page.unsubmitted+"</p>")}function s(t,e){var n="<h2>"+e+'</h2><table class="table table-condensed"><tbody>';for(var o in b.data[t])n=n+"<tr><td><strong>"+o.substring(2)+"</strong></td><td>"+b.data[t][o]+"</td></tr>";return n+"</tbody></table>"}function h(){$(".leaflet-popup-close-button")[0].click()}function g(t){A.resetStyle(t.target),S.update()}function f(t){var e=t.target;e.setStyle({weight:2,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||e.bringToFront(),S.update(e.feature.properties)}function v(t){S.update(t.target.feature.properties)}function m(){return this._div=L.DomUtil.create("div","info"),this._div.innerHTML="<h4>"+b.page.selectCountry+"</h4>",this._div}function y(t){if(t&&"loading"!=t){var e=b.countryLang[t.name][b.lang];this._div.innerHTML=e?"<h4>"+e+"</h4>":"<h4>"+t.name+"</h4>"}else this._div.innerHTML=t?"<h4>"+b.page.loadingMsg+"</h4>":"<h4>"+b.page.selectCountry+"</h4>"}function w(){for(var t=L.DomUtil.create("div","info legend"),e=["#D5D5D5","#B50000"],n=0;n<b.page.labels.length;n++)t.innerHTML+='<div><i style="background:'+e[n]+'"></i>'+(0==n?b.page.labels[n]:b.page.labels[n]+"（"+Object.keys(b.data).length+"）")+"</div>";return t}var b=this;b.updateLang=r;var x,C,T=L.control({position:"bottomleft"}),S=L.control(),A={},D="",j=(L.icon({iconUrl:"./img/tree.png",iconSize:[30,35],iconAnchor:[17,42],popupAnchor:[0,-35]}),null);return window.closePopup=h,S.update=y,o(),this}e.exports=angular.module("myApp").factory("mapService",t),t.$inject=["$http","$window"];var n=L.icon({iconUrl:"http://europa.eu/wel/images/eu_portal/quick_eu_flag.gif",iconSize:[25,20],iconAnchor:[17,42],popupAnchor:[0,-35]})}()},{}]},{},[3]);
